(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1064:function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1065),c=n(1069),l=(n(346),n(603));t.exports=function(){var t={headers:[],rename:[],headerPathString:".",rowDelimiter:",",textDelimiter:'"',arrayPathString:";",undefinedString:"",endOfLine:l||"\n",mainPathItem:null,booleanTrueString:null,booleanFalseString:null,includeHeaders:!0,fillGaps:!1,verticalOutput:!0,forceTextDelimiter:!1},e=void 0,n=void 0,f=void 0;if(3===arguments.length){var h=Array.prototype.slice.call(arguments);e=h[0],n=h[1],f=h[2]}else if(2===arguments.length){var d=void 0,v=Array.prototype.slice.call(arguments);e=v[0],"function"==typeof(d=v[1])?f=d:"object"===(void 0===d?"undefined":r(d))&&(n=d)}else{if(1!==arguments.length)return new c(new o(t));var _=Array.prototype.slice.call(arguments),m=_[0];if("object"===(void 0===m?"undefined":r(m))){var y=Object.keys(t),w=Object.keys(m),x=w.every((function(t){return y.includes(t)}));w.length>0&&x?n=m:e=m}else e=m}var k=Object.assign({},t,n),S=new o(k);return e?new Promise((function(t,n){S.parse(e,(function(e,r){return f?f(e,r):e?n(e):n?t(r):void 0}))})):new c(S)}},1065:function(t,e,n){"use strict";var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(1066),c=n(1067),l=n(346),f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e||{},this._handler=new c(this._options),this._headers=this._options.headers||[],this._escape=n(1068)(this._options.textDelimiter,this._options.rowDelimiter,this._options.forceTextDelimiter)}return r(t,[{key:"parse",value:function(t,e,n){return l.isArray(t)?e(null,this._parseArray(t,n)):l.isObject(t)?e(null,this._parseObject(t)):e(new Error("Unable to parse the JSON object, its not an Array or Object."))}},{key:"_checkRows",value:function(t){var e=null,n=[],r=function(col,t){return""===col||void 0===col?e[t]:col},o=!0,c=!1,l=void 0;try{for(var f,h=t[Symbol.iterator]();!(o=(f=h.next()).done);o=!0){var d=f.value,v=this._headers.length-d.length;v>0&&(d=d.concat(Array(v).join(".").split("."))),e&&this._options.fillGaps&&(d=d.map(r)),n.push(d.join(this._options.rowDelimiter)),e=d}}catch(t){c=!0,l=t}finally{try{!o&&h.return&&h.return()}finally{if(c)throw l}}return n}},{key:"_parseArray",value:function(t,e){var n=this;this._headers=this._headers||[];var r,c=[];r=function(t){var header,e,r=[],o=function(t){return r.push(t.map((function(col){return null!=col?col:""})))},l=function(){return new Array(n._headers.length).fill(null)},f={},h=l(),d=!0,v=!1,_=void 0;try{for(var m,y=t[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var element=m.value,w=(header=element.item,e=void 0,-1===(e=n._headers.indexOf(header))&&(n._headers.push(header),e=n._headers.indexOf(header)),e);null!=h[w]&&(o(h),h=l()),f[w]=f[w]||0,n._options.fillTopRow&&f[w]<r.length?(r[f[w]][w]=n._escape(element.value),f[w]+=1):(h[w]=n._escape(element.value),f[w]+=1)}}catch(t){v=!0,_=t}finally{try{!d&&y.return&&y.return()}finally{if(v)throw _}}h.length>0&&o(h),c=c.concat(n._checkRows(r))};var l=!0,f=!1,h=void 0;try{for(var d,v=t[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var _=d.value;r(n._handler.check(_,n._options.mainPathItem,_,t))}}catch(t){f=!0,h=t}finally{try{!l&&v.return&&v.return()}finally{if(f)throw h}}return!e&&n._options.includeHeaders&&c.unshift(this.headers),o(c,n._options.endOfLine)}},{key:"_parseObject",value:function(t){var e,n=this,r=[],c=[[],[]];for(var l in e=function(t){var e=t.value||0===t.value?t.value.toString():n._options.undefinedString;if(e=n._escape(e),n._options.verticalOutput){var o=[t.item,e];r.push(o.join(n._options.rowDelimiter))}else c[0].push(t.item),c[1].push(e)},t){var f="";this._options.mainPathItem&&(f=this._options.mainPathItem+this._options.headerPathString),this._handler.check(t[l],f+l,l,t).forEach(e)}return this._options.verticalOutput||(r.push(c[0].join(this._options.rowDelimiter)),r.push(c[1].join(this._options.rowDelimiter))),o(r,this._options.endOfLine)}},{key:"headers",get:function(){var t=this,e=this._headers;return this._options.rename&&this._options.rename.length>0&&(e=e.map((function(header){return t._options.rename[t._options.headers.indexOf(header)]||header}))),this._options.forceTextDelimiter&&(e=e.map((function(header){return""+t._options.textDelimiter+header+t._options.textDelimiter}))),this._options.mapHeaders&&(e=e.map(this._options.mapHeaders)),e.join(this._options.rowDelimiter)}}]),t}();t.exports=f},1066:function(t,e,n){"use strict";var r=n(603),o=n(346);t.exports=function(t,e){if(!t||!o.isArray(t))throw new TypeError('Invalid params "rows" for joinRows. Must be an array of string.');return t.join(e||r||"\n")}},1067:function(t,e,n){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var c=n(346),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._options.typeHandlers=this._options.typeHandlers||{}}return o(t,[{key:"_setHeaders",value:function(t,e){var n=this;return e?t.map((function(element){return element.item=element.item?e+n._options.headerPathString+element.item:e,element})):t}},{key:"castValue",value:function(element,t,e,n){var r=this._options.typeHandlers;for(var o in r)if(h(element,o)){element=r[o].call(r,element,e,n);break}return element}},{key:"checkComplex",value:function(element,t){if(c.isDate(element))return[{item:t,value:(this._options.handleDate||this._handleDate)(element,t)}];if(c.isArray(element)){var e=this._handleArray(element,t);return this._setHeaders(e,t)}if(c.isObject(element)){var n=this._handleObject(element);return this._setHeaders(n,t)}return[{item:t,value:""}]}},{key:"check",value:function(element,t,e,n){switch(void 0===(element=this.castValue(element,t,e,n))?"undefined":r(element)){case"string":return[{item:t,value:this._handleString(element,t)}];case"number":return[{item:t,value:this._handleNumber(element,t)}];case"boolean":return[{item:t,value:this._handleBoolean.bind(this)(element,t)}]}return this.checkComplex(element,t)}},{key:"_handleObject",value:function(t){var e=[];for(var n in t){var r=t[n],o=this.check(r,n,n,t);e=e.concat(o)}return e}},{key:"_handleArray",value:function(t){for(var e,n=[],r=0;r<t.length;++r){var element=t[r],o=this.check(element,null,r,t);if(0!==o.length){var c=o[0];c.item||void 0===e?(o.length>0&&!c.item&&void 0===e&&(e=c),n=n.concat(o)):e.value+=this._options.arrayPathString+c.value}}return n}},{key:"_handleBoolean",value:function(t){return t?this._options.booleanTrueString||"true":this._options.booleanFalseString||"false"}},{key:"_handleString",value:function(t){return t}},{key:"_handleNumber",value:function(t){return t}},{key:"_handleDate",value:function(t){return t.toLocaleDateString()}}]),t}();t.exports=l;var f="undefined"==typeof window?e:window;function h(element,t){if(element instanceof f[t])return!0;switch(void 0===element?"undefined":r(element)){case"string":return"String"===t;case"boolean":return"Boolean"===t;case"number":return"Number"===t}return!1}}).call(this,n(20))},1068:function(t,e,n){"use strict";t.exports=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid param "textDelimiter", must be a string.');if("string"!=typeof e)throw new TypeError('Invalid param "rowDelimiter", must be a string.');var r=new RegExp("\\"+t,"g"),o=t+t,c='"'===t?function(t){return t.indexOf(e)>=0||t.indexOf("\n")>=0||t.indexOf('"')>=0}:function(t){return t.indexOf(e)>=0||t.indexOf("\n")>=0};return function(e){return n&&(e=""+e),e.replace?(e=e.replace(r,o),(n||c(e))&&(e=t+e+t),e):e}}},1069:function(t,e,n){"use strict";t.exports=function(t){throw new Error("jsonexport called without third argument as a callback and is required")}},1086:function(t,e,n){"use strict";n.r(e);n(32),n(87),n(16),n(40),n(55),n(54),n(169),n(44);var r=n(7),o=n(401),c=n(1064),l={data:function(){return{loading:!0,effectsdk:null,id:parseInt(this.$route.params.id),tasks:null,results:null,timer:null,batch:null,batchIpfs:null,campaign:null}},mounted:function(){var t=this;this.effectsdk=new o.EffectClient("mainnet"),this.getBatch(),this.getResults(),this.timer=setInterval((function(){t.getResults()}),3e4)},computed:{batchPercentageDone:function(){return this.batch?Math.round(this.batch.tasks_done/(this.batch.num_tasks*this.batch.repetitions)*100):0}},methods:{getBatch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.effectsdk.force.getBatchById(t.id);case 3:return t.batch=e.sent,e.next=6,t.effectsdk.force.getIpfsContent(t.batch.content.field_1);case 6:return t.batchIpfs=e.sent,e.next=9,t.effectsdk.force.getCampaign(t.batch.campaign_id);case 9:t.campaign=e.sent,t.loading=!1,console.log("getBatch",t.batch,t.batchIpfs,t.campaign);case 12:case"end":return e.stop()}}),e)})))()},getResults:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getting results..."),n=0,t.results&&(n=t.results.length),e.next=5,t.effectsdk.force.getSubmissionsOfBatch(t.id);case 5:t.results=e.sent,console.log("results",t.results),t.results.length!==n&&(console.log("results changed"),t.getBatch());case 8:case"end":return e.stop()}}),e)})))()},downloadTaskResults:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.results.map(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var sub,n,r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((sub={}).data=JSON.parse(e.data),n=0,r=Object.keys(sub.data);n<r.length;n++)o=r[n],e[o]=sub.data[o];return delete e.content,delete e.batch_id,delete e.id,delete e.leaf_hash,delete e.paid,c={link_id:null,account_id:null},e=Object.assign(c,e),t.abrupt("return",e);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return n=e.sent,e.next=6,c(n,(function(e,n){if(e)return console.error(e);var r="task_results_".concat(t.id,".csv"),o=new Blob([n],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(o,r);else{var link=document.createElement("a");if(void 0!==link.download){var c=URL.createObjectURL(o);link.setAttribute("href",c),link.setAttribute("download",r),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link)}}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},beforeDestroy:function(){clearInterval(this.timer)}},f=n(8),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section pt-6"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},[n("h2",{staticClass:"title"},[t._v("Order")]),t._v(" "),n("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[n("ul",[n("li",[n("nuxt-link",{attrs:{to:"/"}},[t._v("Home")])],1),t._v(" "),n("li",[n("nuxt-link",{attrs:{to:"/orders"}},[t._v("Order History")])],1),t._v(" "),n("li",{staticClass:"is-active"},[n("nuxt-link",{attrs:{to:"#","aria-current":"page"}},[t._v("Order")])],1)])]),t._v(" "),t.loading?n("div",{staticClass:"loading-text"},[t._v("\n        Loading\n      ")]):n("div",[t.batch&&t.campaign?n("div",[n("br"),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"box media"},[n("figure",{staticClass:"media-left"},[n("p",{staticClass:"image is-128x128 is-square"},[n("img",{attrs:{src:t.campaign.info.image}})])]),t._v(" "),n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("p",{staticClass:"subtitle"},[n("a",{attrs:{href:"https://app.effect.network/campaigns/"+t.batch.campaign_id,target:"_blank",rel:"noopener noreferrer"}},[n("span",{staticClass:"icon-text"},[n("span",[t._v(t._s(t.campaign.info.title))]),t._v(" "),n("span",[n("font-awesome-icon",{staticClass:"mx-1 icon is-small",attrs:{icon:"fa-solid fa-arrow-up-right-from-square"}})],1)])])]),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"subtitle"},[t._v("Details")]),t._v(" "),n("div",{staticClass:"px-6"},[n("p",[n("span",[t._v("Order ID: "),n("strong",[t._v(t._s(t.id))])]),t._v(" "),n("br"),t._v(" "),n("span",[t._v("Status: "),n("strong",[t._v(t._s(t.batchPercentageDone)+"%")])])]),t._v(" "),n("table",{staticClass:"table is-narrow is-centered"},[n("thead"),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("Tasks")]),t._v(" "),n("td",[t._v(t._s(t.batch.num_tasks)+" ×")])]),t._v(" "),n("tr",[n("td",[t._v("Amount")]),t._v(" "),n("td",[t._v(t._s(t.batch.repetitions)+" ×")])]),t._v(" "),n("tr",[n("td",[t._v("Cost per Task")]),t._v(" "),n("td",[n("strong",[t._v(t._s(t.campaign.info.reward)+" EFX")])])])]),t._v(" "),n("tfoot",[n("tr",[n("td",[t._v("Total Cost")]),t._v(" "),n("td",[n("strong",[t._v(t._s(t.batch.balance.quantity))])])])])])]),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"subtitle"},[t._v("Tasks")]),t._v(" "),n("table",{staticClass:"table is-narrow"},[n("thead"),t._v(" "),n("tbody",t._l(t.batchIpfs.tasks,(function(e){return n("tr",{key:e.link_id},[n("td",[t._v(t._s(e.tweet_id))])])})),0)]),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"subtitle"},[t._v("Results ("+t._s(t.batch.tasks_done)+"/"+t._s(t.batch.num_tasks*t.batch.repetitions)+")")]),t._v(" "),t.results&&t.results.length>0?n("div",[n("table",{staticClass:"table",staticStyle:{width:"100%"}},[t._m(0),t._v(" "),n("tbody",t._l(t.results,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.id))]),t._v(" "),n("td",[t._v(t._s(e.data))]),t._v(" "),n("td",[t._v(t._s(e.submitted_on))])])})),0)]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"buttons is-centered"},[n("button",{staticClass:"button is-primary mx-auto is-centered",on:{click:function(e){return e.preventDefault(),t.downloadTaskResults()}}},[t._v("\n                      Download results\n                    ")])])]):n("div",[t._v("\n                  No results yet, please wait while someone start working on your order.\n                ")])])])])]):n("div",[n("p",[t._v("No batch found")])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("ID")]),this._v(" "),e("th",[this._v("Result")]),this._v(" "),e("th",[this._v("Submitted on")])])])}],!1,null,"0b94bd66",null);e.default=component.exports},233:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},314:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},315:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},343:function(t,e,n){var r=n(419),o=n(420),c=n(421);t.exports=function(t,i){return r(t)||o(t,i)||c()}},346:function(t,e,n){"use strict";t.exports.isFunction=function(t){return t&&"[object Function]"==={}.toString.call(t)},t.exports.isArray=function(t){return Array.isArray(t)},t.exports.isObject=function(t){return t instanceof Object},t.exports.isString=function(t){return"string"==typeof t},t.exports.isNumber=function(t){return"number"==typeof t},t.exports.isBoolean=function(t){return"boolean"==typeof t},t.exports.isDate=function(t){return t instanceof Date}},419:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},420:function(t,e){t.exports=function(t,i){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],n=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return e}}},421:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},423:function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}},424:function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},425:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},442:function(t,e){},444:function(t,e){},445:function(t,e){},449:function(t,e){},450:function(t,e){},457:function(t,e){},458:function(t,e){},468:function(t,e){},469:function(t,e){},473:function(t,e){(function(e){t.exports=e}).call(this,{})},475:function(t,e){},483:function(t,e){},484:function(t,e){},489:function(t,e){},491:function(t,e){},518:function(t,e){},520:function(t,e){},521:function(t,e){},525:function(t,e){},531:function(t,e){},534:function(t,e){},536:function(t,e){},547:function(t,e){},548:function(t,e){},552:function(t,e){},556:function(t,e){},571:function(t,e){},588:function(t,e,n){var r=n(423),o=n(424),c=n(425);t.exports=function(t){return r(t)||o(t)||c()}},603:function(t,e,n){"use strict";t.exports="\n"}}]);