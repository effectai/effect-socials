(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1053:function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1054),c=n(1058),l=(n(339),n(588));t.exports=function(){var t={headers:[],rename:[],headerPathString:".",rowDelimiter:",",textDelimiter:'"',arrayPathString:";",undefinedString:"",endOfLine:l||"\n",mainPathItem:null,booleanTrueString:null,booleanFalseString:null,includeHeaders:!0,fillGaps:!1,verticalOutput:!0,forceTextDelimiter:!1},e=void 0,n=void 0,f=void 0;if(3===arguments.length){var h=Array.prototype.slice.call(arguments);e=h[0],n=h[1],f=h[2]}else if(2===arguments.length){var d=void 0,v=Array.prototype.slice.call(arguments);e=v[0],"function"==typeof(d=v[1])?f=d:"object"===(void 0===d?"undefined":r(d))&&(n=d)}else{if(1!==arguments.length)return new c(new o(t));var m=Array.prototype.slice.call(arguments),y=m[0];if("object"===(void 0===y?"undefined":r(y))){var _=Object.keys(t),w=Object.keys(y),k=w.every((function(t){return _.includes(t)}));w.length>0&&k?n=y:e=y}else e=y}var x=Object.assign({},t,n),O=new o(x);return e?new Promise((function(t,n){O.parse(e,(function(e,r){return f?f(e,r):e?n(e):n?t(r):void 0}))})):new c(O)}},1054:function(t,e,n){"use strict";var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(1055),c=n(1056),l=n(339),f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e||{},this._handler=new c(this._options),this._headers=this._options.headers||[],this._escape=n(1057)(this._options.textDelimiter,this._options.rowDelimiter,this._options.forceTextDelimiter)}return r(t,[{key:"parse",value:function(t,e,n){return l.isArray(t)?e(null,this._parseArray(t,n)):l.isObject(t)?e(null,this._parseObject(t)):e(new Error("Unable to parse the JSON object, its not an Array or Object."))}},{key:"_checkRows",value:function(t){var e=null,n=[],r=function(col,t){return""===col||void 0===col?e[t]:col},o=!0,c=!1,l=void 0;try{for(var f,h=t[Symbol.iterator]();!(o=(f=h.next()).done);o=!0){var d=f.value,v=this._headers.length-d.length;v>0&&(d=d.concat(Array(v).join(".").split("."))),e&&this._options.fillGaps&&(d=d.map(r)),n.push(d.join(this._options.rowDelimiter)),e=d}}catch(t){c=!0,l=t}finally{try{!o&&h.return&&h.return()}finally{if(c)throw l}}return n}},{key:"_parseArray",value:function(t,e){var n=this;this._headers=this._headers||[];var r,c=[];r=function(t){var header,e,r=[],o=function(t){return r.push(t.map((function(col){return null!=col?col:""})))},l=function(){return new Array(n._headers.length).fill(null)},f={},h=l(),d=!0,v=!1,m=void 0;try{for(var y,_=t[Symbol.iterator]();!(d=(y=_.next()).done);d=!0){var element=y.value,w=(header=element.item,e=void 0,-1===(e=n._headers.indexOf(header))&&(n._headers.push(header),e=n._headers.indexOf(header)),e);null!=h[w]&&(o(h),h=l()),f[w]=f[w]||0,n._options.fillTopRow&&f[w]<r.length?(r[f[w]][w]=n._escape(element.value),f[w]+=1):(h[w]=n._escape(element.value),f[w]+=1)}}catch(t){v=!0,m=t}finally{try{!d&&_.return&&_.return()}finally{if(v)throw m}}h.length>0&&o(h),c=c.concat(n._checkRows(r))};var l=!0,f=!1,h=void 0;try{for(var d,v=t[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var m=d.value;r(n._handler.check(m,n._options.mainPathItem,m,t))}}catch(t){f=!0,h=t}finally{try{!l&&v.return&&v.return()}finally{if(f)throw h}}return!e&&n._options.includeHeaders&&c.unshift(this.headers),o(c,n._options.endOfLine)}},{key:"_parseObject",value:function(t){var e,n=this,r=[],c=[[],[]];for(var l in e=function(t){var e=t.value||0===t.value?t.value.toString():n._options.undefinedString;if(e=n._escape(e),n._options.verticalOutput){var o=[t.item,e];r.push(o.join(n._options.rowDelimiter))}else c[0].push(t.item),c[1].push(e)},t){var f="";this._options.mainPathItem&&(f=this._options.mainPathItem+this._options.headerPathString),this._handler.check(t[l],f+l,l,t).forEach(e)}return this._options.verticalOutput||(r.push(c[0].join(this._options.rowDelimiter)),r.push(c[1].join(this._options.rowDelimiter))),o(r,this._options.endOfLine)}},{key:"headers",get:function(){var t=this,e=this._headers;return this._options.rename&&this._options.rename.length>0&&(e=e.map((function(header){return t._options.rename[t._options.headers.indexOf(header)]||header}))),this._options.forceTextDelimiter&&(e=e.map((function(header){return""+t._options.textDelimiter+header+t._options.textDelimiter}))),this._options.mapHeaders&&(e=e.map(this._options.mapHeaders)),e.join(this._options.rowDelimiter)}}]),t}();t.exports=f},1055:function(t,e,n){"use strict";var r=n(588),o=n(339);t.exports=function(t,e){if(!t||!o.isArray(t))throw new TypeError('Invalid params "rows" for joinRows. Must be an array of string.');return t.join(e||r||"\n")}},1056:function(t,e,n){"use strict";(function(e){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var c=n(339),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._options=e,this._options.typeHandlers=this._options.typeHandlers||{}}return o(t,[{key:"_setHeaders",value:function(t,e){var n=this;return e?t.map((function(element){return element.item=element.item?e+n._options.headerPathString+element.item:e,element})):t}},{key:"castValue",value:function(element,t,e,n){var r=this._options.typeHandlers;for(var o in r)if(h(element,o)){element=r[o].call(r,element,e,n);break}return element}},{key:"checkComplex",value:function(element,t){if(c.isDate(element))return[{item:t,value:(this._options.handleDate||this._handleDate)(element,t)}];if(c.isArray(element)){var e=this._handleArray(element,t);return this._setHeaders(e,t)}if(c.isObject(element)){var n=this._handleObject(element);return this._setHeaders(n,t)}return[{item:t,value:""}]}},{key:"check",value:function(element,t,e,n){switch(void 0===(element=this.castValue(element,t,e,n))?"undefined":r(element)){case"string":return[{item:t,value:this._handleString(element,t)}];case"number":return[{item:t,value:this._handleNumber(element,t)}];case"boolean":return[{item:t,value:this._handleBoolean.bind(this)(element,t)}]}return this.checkComplex(element,t)}},{key:"_handleObject",value:function(t){var e=[];for(var n in t){var r=t[n],o=this.check(r,n,n,t);e=e.concat(o)}return e}},{key:"_handleArray",value:function(t){for(var e,n=[],r=0;r<t.length;++r){var element=t[r],o=this.check(element,null,r,t);if(0!==o.length){var c=o[0];c.item||void 0===e?(o.length>0&&!c.item&&void 0===e&&(e=c),n=n.concat(o)):e.value+=this._options.arrayPathString+c.value}}return n}},{key:"_handleBoolean",value:function(t){return t?this._options.booleanTrueString||"true":this._options.booleanFalseString||"false"}},{key:"_handleString",value:function(t){return t}},{key:"_handleNumber",value:function(t){return t}},{key:"_handleDate",value:function(t){return t.toLocaleDateString()}}]),t}();t.exports=l;var f="undefined"==typeof window?e:window;function h(element,t){if(element instanceof f[t])return!0;switch(void 0===element?"undefined":r(element)){case"string":return"String"===t;case"boolean":return"Boolean"===t;case"number":return"Number"===t}return!1}}).call(this,n(24))},1057:function(t,e,n){"use strict";t.exports=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid param "textDelimiter", must be a string.');if("string"!=typeof e)throw new TypeError('Invalid param "rowDelimiter", must be a string.');var r=new RegExp("\\"+t,"g"),o=t+t,c='"'===t?function(t){return t.indexOf(e)>=0||t.indexOf("\n")>=0||t.indexOf('"')>=0}:function(t){return t.indexOf(e)>=0||t.indexOf("\n")>=0};return function(e){return n&&(e=""+e),e.replace?(e=e.replace(r,o),(n||c(e))&&(e=t+e+t),e):e}}},1058:function(t,e,n){"use strict";t.exports=function(t){throw new Error("jsonexport called without third argument as a callback and is required")}},1074:function(t,e,n){"use strict";n.r(e);n(32),n(80),n(16),n(39),n(57),n(52),n(167),n(40);var r=n(7),o=n(394),c=n(1053),l={data:function(){return{effectsdk:null,id:parseInt(this.$route.params.id),tasks:null,results:null,timer:null}},created:function(){var t=this;this.effectsdk=new o.EffectClient("mainnet"),this.getResults(),this.timer=setInterval((function(){t.getResults()}),1e4)},methods:{getTask:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("getTask",t.id);case 1:case"end":return e.stop()}}),e)})))()},getResults:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getting results..."),e.next=3,t.effectsdk.force.getSubmissionsOfBatch(t.id);case 3:t.results=e.sent;case 4:case"end":return e.stop()}}),e)})))()},downloadTaskResults:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.results.map(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var sub,n,r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((sub={}).data=JSON.parse(e.data),n=0,r=Object.keys(sub.data);n<r.length;n++)o=r[n],e[o]=sub.data[o];return delete e.content,delete e.batch_id,delete e.id,delete e.leaf_hash,delete e.paid,c={link_id:null,account_id:null},e=Object.assign(c,e),t.abrupt("return",e);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return n=e.sent,e.next=6,c(n,(function(e,n){if(e)return console.error(e);var r="task_results_".concat(t.id,".csv"),o=new Blob([n],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(o,r);else{var link=document.createElement("a");if(void 0!==link.download){var c=URL.createObjectURL(o);link.setAttribute("href",c),link.setAttribute("download",r),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link)}}}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},beforeDestroy:function(){clearInterval(this.timer)}},f=n(8),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section pt-6"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},[n("h2",{staticClass:"title"},[t._v("Task results")]),t._v(" "),t.results&&t.results.length>0?n("div",[n("table",{staticClass:"table",staticStyle:{width:"100%"}},[t._m(0),t._v(" "),n("tbody",t._l(t.results,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.id))]),t._v(" "),n("td",[t._v(t._s(e.data))]),t._v(" "),n("td",[t._v(t._s(e.submitted_on))])])})),0)]),t._v(" "),n("button",{staticClass:"button is-primary",on:{click:function(e){return e.preventDefault(),t.downloadTaskResults()}}},[t._v("\n          Download results\n        ")])]):n("div",[t._v("\n        No tasks found\n      ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("ID")]),this._v(" "),e("th",[this._v("Result")]),this._v(" "),e("th",[this._v("Submitted on")])])])}],!1,null,"3308778a",null);e.default=component.exports},339:function(t,e,n){"use strict";t.exports.isFunction=function(t){return t&&"[object Function]"==={}.toString.call(t)},t.exports.isArray=function(t){return Array.isArray(t)},t.exports.isObject=function(t){return t instanceof Object},t.exports.isString=function(t){return"string"==typeof t},t.exports.isNumber=function(t){return"number"==typeof t},t.exports.isBoolean=function(t){return"boolean"==typeof t},t.exports.isDate=function(t){return t instanceof Date}},429:function(t,e){},431:function(t,e){},432:function(t,e){},436:function(t,e){},437:function(t,e){},444:function(t,e){},445:function(t,e){},455:function(t,e){},456:function(t,e){},461:function(t,e){},469:function(t,e){},470:function(t,e){},475:function(t,e){},477:function(t,e){},504:function(t,e){},506:function(t,e){},507:function(t,e){},511:function(t,e){},517:function(t,e){},520:function(t,e){},522:function(t,e){},533:function(t,e){},534:function(t,e){},538:function(t,e){},542:function(t,e){},557:function(t,e){},588:function(t,e,n){"use strict";t.exports="\n"}}]);